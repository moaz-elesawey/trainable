{% extends 'staff/base.html' %}

{% block staff_content %}

<div class='card pb-0'>
  <div class='card-body p-3'>
    <div 
      class='d-flex flex-column flex-sm-column flex-md-row flex-lg-row justify-content-between align-items-center'
    >
      <p class='mb-0 poppins-semibold card-title'>Programs</p>
      <form method='get' action="{{ url_for('staff.panel', q=q) }}" class='d-flex gap-2'>
        <input type="search" name="q" placeholder="Search" value='{{q}}'
              class='form-control form-control-sm' />
        <button type="submit" class='btn btn-sm btn-primary'>Search</button>
      </form>
    </div>
    <div class='border-bottom my-2'></div>
<div class='table-responsive' style='max-height: 15rem'>
<table class='table align-middle table-striped sticky-top mb-0'>
  <thead>
  <tr>
    <th>#</th>
    <th>Name</th>
    <th>Enrolled</th>
    <th>Lessons</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody>
    {% for course in courses %}
    <tr>
      <td>{{ loop.index }}</td>
      <td>{{ course.name }}</td>
      <td>{{ course.enrolled_count }} User(s)</td>
      <td>{{ course.lessons.__len__() }} Lesson(s)</td>
      <td>
        <div class="btn-group">
          <a 
            class='btn btn-sm btn-primary' 
            href="{{ url_for('staff.assign_course_lesson', course_id=course.course_id) }}"
          >Details</a>
        <a 
            class='btn btn-sm btn-info' 
            href="{{ url_for('staff.assign_course_lesson', course_id=course.course_id) }}"
          >Assign Users</a>
        </div>
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
  </div>
</div>
{% endblock staff_content %}

